(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{74:function(e,a,n){"use strict";n.r(a),n.d(a,"frontMatter",(function(){return o})),n.d(a,"metadata",(function(){return c})),n.d(a,"rightToc",(function(){return d})),n.d(a,"default",(function(){return i}));var t=n(2),r=n(6),l=(n(0),n(90)),o={id:"doc1",title:"FA 1.2",sidebar_label:"FA 1.2 implementation",slug:"/"},c={unversionedId:"doc1",id:"doc1",isDocsHomePage:!1,title:"FA 1.2",description:"FA 1.2 is the fungible token specification for Tezos :",source:"@site/docs/doc1.md",slug:"/",permalink:"/completium/docs/",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/doc1.md",version:"current",sidebar_label:"FA 1.2 implementation",sidebar:"someSidebar",next:{title:"FA 1.2 Formal specification",permalink:"/completium/docs/doc2"}},d=[{value:"Totalsupply",id:"totalsupply",children:[]},{value:"Ledger",id:"ledger",children:[]},{value:"Allowance",id:"allowance",children:[]},{value:"Transfer",id:"transfer",children:[]},{value:"Approve",id:"approve",children:[]},{value:"getAllowance",id:"getallowance",children:[]},{value:"getBalance",id:"getbalance",children:[]},{value:"getTotalSupply",id:"gettotalsupply",children:[]}],s={rightToc:d};function i(e){var a=e.components,n=Object(r.a)(e,["components"]);return Object(l.b)("wrapper",Object(t.a)({},s,n,{components:a,mdxType:"MDXLayout"}),Object(l.b)("p",null,"FA 1.2 is the fungible token specification for Tezos :"),Object(l.b)("h2",{id:"totalsupply"},"Totalsupply"),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{className:"language-archetype"}),"constant totalsupply : nat = 10_000_000\n")),Object(l.b)("h2",{id:"ledger"},"Ledger"),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{className:"language-archetype",metastring:"{1}","{1}":!0}),"asset ledger identified by holder to big_map {\n  holder     : address;\n  tokens     : nat = 0;\n} initialized by {\n  { holder = caller; tokens = totalsupply }\n}\n")),Object(l.b)("h2",{id:"allowance"},"Allowance"),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{className:"language-archetype",metastring:"{1}","{1}":!0}),"asset allowance identified by addr_owner addr_spender to big_map {\n  addr_owner       : address;\n  addr_spender     : address;\n  amount           : nat;\n}\n")),Object(l.b)("h2",{id:"transfer"},"Transfer"),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{className:"language-archetype",metastring:"{1}","{1}":!0}),'entry %transfer (%from : address, %to : address, value : nat) {\n  require {\n    r1 otherwise "NotEnoughBalance" : ledger[%from].tokens >= value;\n  }\n  effect {\n    if caller <> %from then begin\n      var current = allowance[(%from, caller)].amount;\n      dofailif(current < value, ("NotEnoughAllowance", ((value, current))));\n      allowance.update((%from, caller), { amount -=  value });\n    end;\n    ledger.update(%from, { tokens -= value });\n    ledger.addupdate(%to, { tokens += value });\n  }\n}\n')),Object(l.b)("h2",{id:"approve"},"Approve"),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{className:"language-archetype",metastring:"{1}","{1}":!0}),'entry approve(spender : address, value : nat) {\n  var k = (caller, spender);\n  if allowance.contains(k) then begin\n    var previous = allowance[k].amount;\n    dofailif(previous > 0 and value > 0, (("UnsafeAllowanceChange", previous)));\n  end;\n  allowance.addupdate( k, { amount = value });\n}\n')),Object(l.b)("h2",{id:"getallowance"},"getAllowance"),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{className:"language-archetype",metastring:"{1}","{1}":!0}),"getter getAllowance (owner : address, spender : address) : nat {\n  return (allowance[(owner, spender)].amount)\n}\n")),Object(l.b)("h2",{id:"getbalance"},"getBalance"),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{className:"language-archetype",metastring:"{1}","{1}":!0}),"getter getBalance (owner : address) : nat {\n  return (ledger[owner].tokens)\n}\n")),Object(l.b)("h2",{id:"gettotalsupply"},"getTotalSupply"),Object(l.b)("pre",null,Object(l.b)("code",Object(t.a)({parentName:"pre"},{className:"language-archetype",metastring:"{1}","{1}":!0}),"getter getTotalSupply () : nat {\n  return totalsupply\n}\n")))}i.isMDXComponent=!0}}]);