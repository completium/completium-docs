(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{82:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return d}));var o=n(2),r=n(6),a=(n(0),n(90)),i={id:"doc2",title:"FA 1.2 Formal specification"},l={unversionedId:"doc2",id:"doc2",isDocsHomePage:!1,title:"FA 1.2 Formal specification",description:"Contract invariant",source:"@site/docs/doc2.md",slug:"/doc2",permalink:"/completium/docs/doc2",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/doc2.md",version:"current",sidebar:"someSidebar",previous:{title:"FA 1.2",permalink:"/completium/docs/"},next:{title:"This is Document Number 3",permalink:"/completium/docs/doc3"}},s=[{value:"Contract invariant",id:"contract-invariant",children:[]},{value:"Transfer postconditions",id:"transfer-postconditions",children:[{value:"Effect on <code>ledger</code>",id:"effect-on-ledger",children:[]}]}],c={rightToc:s};function d(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(a.b)("wrapper",Object(o.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h2",{id:"contract-invariant"},"Contract invariant"),Object(a.b)("p",null,"No token is minted: the total number of tokens is equal to the initial totalsupply number of tokens."),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-archetype",metastring:"{1}","{1}":!0}),"specification {\n  s1: ledger.sum(tokens) = totalsupply;\n}\n")),Object(a.b)("h2",{id:"transfer-postconditions"},"Transfer postconditions"),Object(a.b)("h3",{id:"effect-on-ledger"},"Effect on ",Object(a.b)("inlineCode",{parentName:"h3"},"ledger")),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"When the ",Object(a.b)("inlineCode",{parentName:"li"},"%to")," address is different from the ",Object(a.b)("inlineCode",{parentName:"li"},"%from")," address, the number of tokens ",Object(a.b)("inlineCode",{parentName:"li"},"%to")," possesses is decread by value.")),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-archetype",metastring:"{2,6}","{2,6}":!0}),"postcondition transfer_p1 {\n  %from <> %to ->\n  let some before_ledger_from = before.ledger[%from] in\n  let some after_ledger_from  = ledger[%from] in\n  after_ledger_from = { before_ledger_from with\n    tokens = abs(before_ledger_from.tokens - value)\n  }\n  otherwise false otherwise false\n}\n")),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"When the ",Object(a.b)("inlineCode",{parentName:"li"},"%to")," address is different from the ",Object(a.b)("inlineCode",{parentName:"li"},"%from")," address, the number of tokens ",Object(a.b)("inlineCode",{parentName:"li"},"%to")," possesses is increased by value when ",Object(a.b)("inlineCode",{parentName:"li"},"%to")," is already registered in the ledger, and set to value otherwise. Anyway, ",Object(a.b)("inlineCode",{parentName:"li"},"%to")," is registered in ledger.")),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-archetype",metastring:"{2,6,9}","{2,6,9}":!0}),"postcondition transfer_p2 {\n  %from <> %to ->\n  let some after_ledger_to = ledger[%to] in\n  let some before_ledger_to = before.ledger[%to] in\n    after_ledger_to = { before_ledger_to with\n      tokens = (before_ledger_to.tokens + value)\n    }\n  otherwise\n    after_ledger_to = { holder = %to; tokens = value }\n  otherwise false\n}\n")),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"No effect on ledger when ",Object(a.b)("inlineCode",{parentName:"li"},"%from")," is equal to ",Object(a.b)("inlineCode",{parentName:"li"},"%to"),".")),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-archetype",metastring:"{2}","{2}":!0}),"specification transfer_p3 {\n  %from = %to ->\n  ledger = before.ledger\n}\n")),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Tokenholders other than %from and %to, are not modified nor added to ledger.")),Object(a.b)("pre",null,Object(a.b)("code",Object(o.a)({parentName:"pre"},{className:"language-archetype",metastring:"{5}","{5}":!0}),"specification transfer_p4 {\n  forall tokenholder in ledger,\n  tokenholder.holder <> %from ->\n  tokenholder.holder <> %to ->\n  before.ledger[tokenholder.holder] = some(tokenholder)\n}\n")))}d.isMDXComponent=!0}}]);